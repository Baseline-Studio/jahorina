<div class="big-map">
    <div class="container container--sm">
        <div class="section-head fade-in">
            <h2 class="section-head__title"><?php echo get_sub_field('big_map_title'); ?></h2>
            <div class="section-head__subtitle"><?php echo get_sub_field('big_map_subtitle'); ?></div>
        </div>
    </div>

    <!-- Tab buttons -->
    <div class="tabs">
        <button class="tab-button active" data-tab="summer">
            <!-- SVG kod za letnju ikonicu -->
            <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon icon-summer">
                <g clip-path="url(#clip0_1285_31505)">
                    <path d="M13.6797 5.55859C14.2305 5.55859 14.6875 5.10156 14.6875 4.53906V2.01953C14.6875 1.45703 14.2305 1 13.6797 1C13.1172 1 12.6602 1.45703 12.6602 2.01953V4.53906C12.6602 5.10156 13.1172 5.55859 13.6797 5.55859ZM19.4219 7.96094C19.8203 8.34766 20.4648 8.35938 20.8633 7.96094L22.6562 6.16797C23.043 5.78125 23.043 5.125 22.6562 4.72656C22.2695 4.33984 21.625 4.33984 21.2266 4.72656L19.4219 6.53125C19.0352 6.92969 19.0352 7.57422 19.4219 7.96094ZM21.8008 13.7148C21.8008 14.2656 22.2695 14.7227 22.8203 14.7227H25.3398C25.8906 14.7227 26.3477 14.2656 26.3477 13.7148C26.3477 13.1641 25.8906 12.6953 25.3398 12.6953H22.8203C22.2695 12.6953 21.8008 13.1641 21.8008 13.7148ZM19.4219 19.4688C19.0352 19.8672 19.0352 20.5117 19.4219 20.8984L21.2266 22.7148C21.625 23.0898 22.2695 23.0781 22.6562 22.7031C23.043 22.3047 23.043 21.6602 22.6562 21.2734L20.8516 19.4688C20.4648 19.0938 19.8203 19.0938 19.4219 19.4688ZM13.6797 21.8711C13.1172 21.8711 12.6602 22.3281 12.6602 22.8789V25.4102C12.6602 25.9609 13.1172 26.418 13.6797 26.418C14.2305 26.418 14.6875 25.9609 14.6875 25.4102V22.8789C14.6875 22.3281 14.2305 21.8711 13.6797 21.8711ZM7.92578 19.4688C7.52734 19.0938 6.87109 19.0938 6.48438 19.4688L4.69141 21.2617C4.30469 21.6484 4.30469 22.293 4.67969 22.6914C5.06641 23.0664 5.72266 23.0781 6.12109 22.7031L7.91406 20.8984C8.30078 20.5117 8.30078 19.8672 7.92578 19.4688ZM5.54688 13.7148C5.54688 13.1641 5.07812 12.6953 4.52734 12.6953H2.00781C1.45703 12.6953 1 13.1641 1 13.7148C1 14.2656 1.45703 14.7227 2.00781 14.7227H4.52734C5.07812 14.7227 5.54688 14.2656 5.54688 13.7148ZM7.91406 7.96094C8.30078 7.58594 8.30078 6.91797 7.92578 6.53125L6.13281 4.72656C5.74609 4.35156 5.08984 4.33984 4.70312 4.72656C4.31641 5.125 4.31641 5.78125 4.69141 6.15625L6.48438 7.96094C6.87109 8.34766 7.51562 8.34766 7.91406 7.96094Z" />
                    <path d="M13.668 19.6914C16.9258 19.6914 19.6328 16.9844 19.6328 13.7148C19.6328 10.4336 16.9258 7.72656 13.668 7.72656C10.4102 7.72656 7.70312 10.4336 7.70312 13.7148C7.70312 16.9844 10.4102 19.6914 13.668 19.6914ZM13.668 17.8984C11.3828 17.8984 9.48438 16 9.48438 13.7148C9.48438 11.418 11.3828 9.51953 13.668 9.51953C15.9531 9.51953 17.8516 11.418 17.8516 13.7148C17.8516 16 15.9531 17.8984 13.668 17.8984Z" />
                </g>
            </svg>
        </button>
        <button class="tab-button" data-tab="winter">
            <!-- SVG kod za zimsku ikonicu -->
            <svg width="22" height="25" viewBox="0 0 22 25" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon icon-winter">
                <g clip-path="url(#clip0_1284_33625)">
                    <path d="M11.0026 24.5019C11.5182 24.5019 11.8229 24.1386 11.8229 23.6347V21.0918L13.8385 22.2402C14.2721 22.4746 14.7174 22.4394 14.9635 22.0058C15.1745 21.6425 15.0456 21.1855 14.6002 20.9394L11.8229 19.3574V17.8691L11.5885 13.6855L15.1159 15.9707L16.4167 16.7089L16.3932 19.9082C16.3932 20.4121 16.7096 20.7754 17.1198 20.7754C17.6237 20.7754 17.8815 20.4004 17.8815 19.9082L17.8932 17.5644L20.1081 18.8535C20.5651 19.123 20.9987 19.0058 21.2448 18.5839C21.4909 18.1386 21.362 17.6816 20.9284 17.4355L18.7135 16.1582L20.7292 14.9746C21.151 14.7168 21.3385 14.3183 21.0924 13.8964C20.8581 13.5214 20.4127 13.416 19.9792 13.6738L17.2252 15.291L15.9245 14.5527L12.1393 12.6543L15.9362 10.7559L17.2135 10.0059L19.9674 11.623C20.401 11.8808 20.8815 11.7754 21.1042 11.4121C21.3385 10.9902 21.151 10.5801 20.7292 10.3223L18.7135 9.15039L20.9284 7.87305C21.3737 7.61523 21.5026 7.16992 21.2565 6.72461C21.0104 6.30273 20.5651 6.19726 20.1198 6.45508L17.8932 7.7207L17.8698 5.38867C17.8698 4.88476 17.6237 4.5332 17.1315 4.5332C16.6979 4.5332 16.3932 4.88476 16.3932 5.38867L16.4049 8.57617L15.1159 9.32617L11.5885 11.623L11.8229 7.42773V5.93945L14.6002 4.36914C15.0456 4.11133 15.1745 3.66602 14.9635 3.29102C14.7174 2.86914 14.2721 2.82226 13.8385 3.06836L11.8229 4.2168V1.66211C11.8229 1.1582 11.5182 0.806641 11.0026 0.806641C10.5104 0.806641 10.194 1.1582 10.194 1.66211V4.2168L8.14326 3.06836C7.70966 2.82226 7.28779 2.86914 7.02998 3.29102C6.81904 3.66602 6.95966 4.11133 7.40498 4.35742L10.194 5.93945V7.42773L10.4167 11.623L6.88935 9.32617L5.58857 8.57617L5.61201 5.38867C5.61201 4.88476 5.30732 4.5332 4.88544 4.5332C4.38154 4.5332 4.12373 4.89648 4.12373 5.38867L4.11201 7.7207L1.88544 6.45508C1.45185 6.20898 0.9831 6.30273 0.748725 6.72461C0.490913 7.16992 0.631538 7.62695 1.07685 7.87305L3.27998 9.15039L1.27607 10.3223C0.854194 10.5801 0.666694 10.955 0.901069 11.4121C1.11201 11.7871 1.59248 11.8808 2.03779 11.623L4.77998 10.0176L6.06904 10.7559L9.85419 12.6543L6.06904 14.5527L4.77998 15.3027L2.02607 13.6738C1.59248 13.416 1.12373 13.5214 0.924506 13.8847C0.678413 14.3418 0.854194 14.7168 1.27607 14.9746L3.29169 16.1582L1.07685 17.4355C0.643256 17.6816 0.502631 18.1504 0.748725 18.5722C1.00654 19.0175 1.45185 19.0996 1.88544 18.8535L4.11201 17.5878L4.12373 19.9082C4.12373 20.4004 4.38154 20.7754 4.87373 20.7754C5.2956 20.7754 5.61201 20.4121 5.61201 19.9082L5.60029 16.7089L6.88935 15.9824L10.4167 13.6855L10.194 17.8691V19.3574L7.40498 20.9394C6.95966 21.1855 6.81904 21.6425 7.02998 22.0058C7.28779 22.4394 7.70966 22.4746 8.14326 22.2402L10.194 21.08V23.6347C10.194 24.1386 10.5104 24.5019 11.0026 24.5019Z" />
                </g>
            </svg>
        </button>
    </div>

    <!-- Summer Content -->
    <div class="tab-content active summer" id="summer">
        <div class="big-map__img-container">
            <?php 
            $mapa_atrakcija = get_sub_field('mapa_atrakcija'); 
            if ($mapa_atrakcija) :
                $letnja_mapa = $mapa_atrakcija['letnja_mapa'];
                $mapa_pin = $mapa_atrakcija['mapa_pin'];
            ?>
                <img src="<?php echo esc_url($letnja_mapa['url']); ?>" alt="Summer Map" id="season-image">
                <img src="<?php echo esc_url($mapa_pin['url']); ?>" alt="Pin" id="pin">

                <!-- Generisanje tačaka iz repeater polja -->
                <?php if (!empty($mapa_atrakcija['mapa_tacke_summer'])) : ?>
                    <?php foreach ($mapa_atrakcija['mapa_tacke_summer'] as $tacka) : ?>
                        <div class="point point-<?php echo esc_attr($tacka['broj_tacke_summer']); ?>" 
                            data-title="<?php echo esc_attr($tacka['naziv_tacke_summer']); ?>">
                            <?php echo esc_html($tacka['broj_tacke_summer']); ?>
                        </div>
                    <?php endforeach; ?>
                <?php endif; ?>
            <?php endif; ?>
        </div>
        <?php 

        $atrakcije_summer = get_sub_field('atrakcije_summer');
        if ($atrakcije_summer): ?>
            <div class="attractions-sec fade-in">
                <div class="container container--sm">
                    <h3><?php echo wp_kses_post(get_sub_field('atrakcije_section_title')); ?></h3>
                    <div class="attractions-sec__container">
                        <?php 
                        $counter = 0;
                        foreach ($atrakcije_summer as $atrakcija): 
                            if ($counter % 4 == 0): ?>
                                <div class="attraction-item">
                            <?php endif; ?>

                            <span class="attraction-name"><?php echo esc_html($atrakcija['ime_atrakcije_summer']); ?></span>

                            <?php 
                            $counter++;
                            if ($counter % 4 == 0): ?>
                                </div>
                            <?php endif; ?>
                        <?php endforeach; ?>

                        <?php if ($counter % 4 != 0): ?>
                            </div>
                        <?php endif; ?>
                    </div>
                </div>
            </div>
        <?php endif; ?>

    </div>

    <!-- Winter Content -->
    <div class="tab-content winter" id="winter">
        <div class="big-map__img-container">
            <?php 
            $mapa_atrakcija_winter = get_sub_field('mapa_atrakcija_winter'); 
            if ($mapa_atrakcija_winter) :
                $mapa_winter = $mapa_atrakcija_winter['mapa_winter']; // Slika zimske mape
                $mapa_pin_winter = $mapa_atrakcija_winter['mapa_pin_winter']; // Ikonica pin
            ?>
            
            <img src="<?php echo esc_url($mapa_winter['url']); ?>" alt="Winter Map" id="season-image">
            <img src="<?php echo esc_url($mapa_pin_winter['url']); ?>" alt="pin" id="pin">

            <!-- Dinamičko dodavanje tačaka sa mape -->
            <?php if (!empty($mapa_atrakcija_winter['mape_tacke_winter'])) : ?>
                <?php foreach ($mapa_atrakcija_winter['mape_tacke_winter'] as $tacka) : ?>
                    <div class="point point-<?php echo esc_attr($tacka['broj_tacke_winter']); ?>" 
                        data-title="<?php echo esc_attr($tacka['naziv_tacke_winter']); ?>">
                        <?php echo esc_html($tacka['broj_tacke_winter']); ?>
                    </div>
                <?php endforeach; ?>
            <?php endif; ?>

            <?php endif; ?>
        </div>

        <div class="attractions-sec">
            <div class="container container--sm">
                <h3>Atrakcije u blizini</h3>
                <div class="attractions-sec__container">
                    <div class="attraction-item">
                        <span class="attraction-name">Poljice Gondola</span>
                        <span class="attraction-name">Ogorjelica I</span>
                        <span class="attraction-name">Ogorjelica II</span>
                        <span class="attraction-name">Rajska</span>
                    </div>
                    <div class="attraction-item">
                        <span class="attraction-name">Olimpik</span>
                        <span class="attraction-name">Skočine</span>
                        <span class="attraction-name">Poljice I</span>
                        <span class="attraction-name">Gondola</span>
                    </div>
                    <div class="attraction-item">
                        <span class="attraction-name">Trnovo</span>
                        <span class="attraction-name">Spust</span>
                        <span class="attraction-name">Javor</span>
                        <span class="attraction-name">Oštra Glover</span>
                    </div>
                    <div class="attraction-item">
                        <span class="attraction-name">Prača</span>
                        <span class="attraction-name">Sankalište</span>
                        <span class="attraction-name">Staza za ski sanke</span>
                        <span class="attraction-name">Zipline</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>